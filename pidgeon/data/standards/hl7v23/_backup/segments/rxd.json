{
  "segment": "RXD",
  "name": "Pharmacy/Treatment Dispense",
  "description": "The Pharmacy/Treatment Dispense segment (RXD) carries the pharmacy's response to the original prescription or treatment order. It contains the dispense information about what was actually dispensed, quantities, dates, and relevant pharmacy details. This segment is essential for pharmacy operations, medication reconciliation, and billing workflows.",
  "standard": "hl7v23",
  "version": "2.3",
  "usage": "O",
  "cardinality": {
    "min": 0,
    "max": 1,
    "note": "RXD provides actual dispensing details when prescriptions are filled"
  },
  "messageTypes": ["RDS^O13", "RDE^O11", "ORU^R01", "ADT^A01", "ADT^A08"],
  "fields": {
    "RXD.1": {
      "name": "Dispense Sub-ID Counter",
      "description": "This field contains the dispense sub-ID counter which allows for the unique identification of each dispense record.",
      "dataType": "NM",
      "usage": "R",
      "maxLength": 4,
      "cardinality": {"min": 1, "max": 1},
      "generationHint": "Sequential counter starting at 1 for each prescription",
      "example": "1"
    },
    "RXD.2": {
      "name": "Dispense/Give Code",
      "description": "This field contains the dispense/give code that identifies what was actually dispensed.",
      "dataType": "CE",
      "usage": "R",
      "maxLength": 250,
      "cardinality": {"min": 1, "max": 1},
      "validValues": ["NDC codes", "RxNorm", "Local pharmacy codes"],
      "generationHint": "Use NDC format: 12345-678-90^Medication Name^NDC",
      "example": "00074-3943-02^Lipitor 20mg^NDC"
    },
    "RXD.3": {
      "name": "Date/Time Dispensed",
      "description": "This field contains the date and time the medication was dispensed.",
      "dataType": "TS",
      "usage": "R",
      "maxLength": 26,
      "cardinality": {"min": 1, "max": 1},
      "generationHint": "Format: YYYYMMDDHHMMSS, typically within business hours",
      "example": "20230315143000"
    },
    "RXD.4": {
      "name": "Actual Dispense Amount",
      "description": "This field contains the actual amount of medication dispensed.",
      "dataType": "NM",
      "usage": "R",
      "maxLength": 20,
      "cardinality": {"min": 1, "max": 1},
      "generationHint": "Numeric value representing quantity dispensed",
      "example": "30"
    },
    "RXD.5": {
      "name": "Actual Dispense Units",
      "description": "This field contains the units of the actual amount dispensed.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["TAB", "CAP", "ML", "MG", "EA", "BOTTLE"],
      "generationHint": "Use standard pharmacy units",
      "example": "TAB^Tablet^HL70162"
    },
    "RXD.6": {
      "name": "Actual Dosage Form",
      "description": "This field contains the actual dosage form of the medication dispensed.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["ORAL", "TOPICAL", "INJECTION", "INHALER", "SUPPOSITORY"],
      "generationHint": "Use FDA dosage form codes",
      "example": "ORAL^Oral^FDA"
    },
    "RXD.7": {
      "name": "Prescription Number",
      "description": "This field contains the prescription number assigned by the pharmacy.",
      "dataType": "ST",
      "usage": "R",
      "maxLength": 20,
      "cardinality": {"min": 1, "max": 1},
      "generationHint": "Unique pharmacy prescription identifier",
      "example": "RX2023031501"
    },
    "RXD.8": {
      "name": "Number of Refills Remaining",
      "description": "This field contains the number of refills remaining on the prescription.",
      "dataType": "NM",
      "usage": "O",
      "maxLength": 3,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Integer from 0 to maximum allowed refills",
      "example": "5"
    },
    "RXD.9": {
      "name": "Dispense Notes",
      "description": "This field contains notes about the dispense that the pharmacy wants to communicate.",
      "dataType": "ST",
      "usage": "O",
      "maxLength": 200,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Free text pharmacy notes or counseling information",
      "example": "Take with food. May cause drowsiness."
    },
    "RXD.10": {
      "name": "Dispensing Provider",
      "description": "This field contains the identification of the person who dispensed the medication.",
      "dataType": "XCN",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Pharmacist identifier in XCN format",
      "example": "12345^Smith^John^A^^^PharmD^NPI^1234567890"
    },
    "RXD.11": {
      "name": "Substitution Status",
      "description": "This field indicates whether substitution occurred and what type.",
      "dataType": "ID",
      "usage": "O",
      "maxLength": 1,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["0", "1", "2", "3", "4", "5", "7", "8", "G", "N", "T"],
      "generationHint": "0=No substitution, 1=Generic substitution, N=No substitution allowed",
      "example": "1"
    },
    "RXD.12": {
      "name": "Total Daily Dose",
      "description": "This field contains the total daily dose of the medication as dispensed.",
      "dataType": "CQ",
      "usage": "O",
      "maxLength": 10,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Quantity with units for daily dosing",
      "example": "40^MG"
    },
    "RXD.13": {
      "name": "Dispense-to Location",
      "description": "This field identifies the location where the medication was dispensed to.",
      "dataType": "LA2",
      "usage": "O",
      "maxLength": 200,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Patient address or pickup location",
      "example": "HOME^123 Main St^Anytown^CA^90210^USA"
    },
    "RXD.14": {
      "name": "Needs Human Review",
      "description": "This field indicates whether the dispensed medication needs human review.",
      "dataType": "ID",
      "usage": "O",
      "maxLength": 1,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["Y", "N"],
      "generationHint": "Y if clinical review required, N otherwise",
      "example": "N"
    },
    "RXD.15": {
      "name": "Pharmacy/Treatment Supplier's Special Dispensing Instructions",
      "description": "This field contains special instructions from the pharmacy for dispensing.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Coded instructions for special handling",
      "example": "REFRIGERATE^Keep Refrigerated^LOCAL"
    },
    "RXD.16": {
      "name": "Actual Strength",
      "description": "This field contains the actual strength of the medication dispensed.",
      "dataType": "NM",
      "usage": "O",
      "maxLength": 20,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Numeric strength value",
      "example": "20"
    },
    "RXD.17": {
      "name": "Actual Strength Unit",
      "description": "This field contains the units for the actual strength.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["MG", "MCG", "UNIT", "MEQ", "PERCENT"],
      "generationHint": "Standard pharmaceutical strength units",
      "example": "MG^Milligram^UCUM"
    },
    "RXD.18": {
      "name": "Substance Lot Number",
      "description": "This field contains the lot number of the substance dispensed.",
      "dataType": "ST",
      "usage": "O",
      "maxLength": 20,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Manufacturer lot number for tracking",
      "example": "LOT123ABC"
    },
    "RXD.19": {
      "name": "Substance Expiration Date",
      "description": "This field contains the expiration date of the substance dispensed.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Future date in YYYYMMDD format",
      "example": "20251215"
    },
    "RXD.20": {
      "name": "Substance Manufacturer Name",
      "description": "This field contains the name of the manufacturer of the dispensed substance.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Pharmaceutical manufacturer identifier",
      "example": "PFIZER^Pfizer Inc^MANUFACTURER"
    },
    "RXD.21": {
      "name": "Indication",
      "description": "This field contains the indication for which the medication was dispensed.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["ICD-10-CM codes", "SNOMED CT"],
      "generationHint": "Clinical indication code",
      "example": "E78.5^Hyperlipidemia^ICD10"
    },
    "RXD.22": {
      "name": "Dispense Package Size",
      "description": "This field contains the package size of the dispensed medication.",
      "dataType": "NM",
      "usage": "O",
      "maxLength": 20,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Size of the dispensed package",
      "example": "30"
    },
    "RXD.23": {
      "name": "Dispense Package Size Unit",
      "description": "This field contains the units for the package size.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["TAB", "CAP", "ML", "BOTTLE", "VIAL"],
      "generationHint": "Package unit type",
      "example": "TAB^Tablet^HL70162"
    },
    "RXD.24": {
      "name": "Dispense Package Method",
      "description": "This field indicates the method used to dispense the package.",
      "dataType": "ID",
      "usage": "O",
      "maxLength": 2,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["F", "M", "A"],
      "generationHint": "F=Fill, M=Mail, A=Automatic",
      "example": "F"
    },
    "RXD.25": {
      "name": "Supplementary Code",
      "description": "This field contains supplementary codes related to the dispense.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Additional coding for special circumstances",
      "example": "URGENT^Urgent Fill^LOCAL"
    },
    "RXD.26": {
      "name": "Initiating Location",
      "description": "This field identifies the location that initiated the dispense request.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Originating location identifier",
      "example": "PHARM001^Main Pharmacy^FACILITY"
    },
    "RXD.27": {
      "name": "Packaging/Assembly Location",
      "description": "This field identifies where the medication was packaged or assembled.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Packaging facility identifier",
      "example": "CENTRAL^Central Pharmacy^FACILITY"
    },
    "RXD.28": {
      "name": "Actual Drug Strength Volume",
      "description": "This field contains the volume component of drug strength for liquid medications.",
      "dataType": "NM",
      "usage": "O",
      "maxLength": 5,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Volume amount for liquid strength calculations",
      "example": "5"
    },
    "RXD.29": {
      "name": "Actual Drug Strength Volume Units",
      "description": "This field contains the units for the drug strength volume.",
      "dataType": "CWE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["ML", "L", "OZ", "TSP", "TBSP"],
      "generationHint": "Volume units for liquid medications",
      "example": "ML^Milliliter^UCUM"
    },
    "RXD.30": {
      "name": "Dispense to Pharmacy",
      "description": "This field identifies the pharmacy that received the dispensed medication.",
      "dataType": "CWE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Destination pharmacy identifier",
      "example": "PHARM002^Retail Pharmacy^NPI^1234567890"
    },
    "RXD.31": {
      "name": "Dispense to Pharmacy Address",
      "description": "This field contains the address of the pharmacy that received the medication.",
      "dataType": "XAD",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Complete pharmacy address",
      "example": "456 Pharmacy Blvd^^Anytown^CA^90210^USA"
    },
    "RXD.32": {
      "name": "Pharmacy Order Type",
      "description": "This field indicates the type of pharmacy order being dispensed.",
      "dataType": "ID",
      "usage": "O",
      "maxLength": 1,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["I", "O", "S"],
      "generationHint": "I=Inpatient, O=Outpatient, S=Specialty",
      "example": "O"
    },
    "RXD.33": {
      "name": "Dispense Type",
      "description": "This field indicates the type of dispense being performed.",
      "dataType": "CWE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["NEW", "REFILL", "PARTIAL", "EMERGENCY"],
      "generationHint": "Type of medication dispensing",
      "example": "NEW^New Prescription^LOCAL"
    }
  },
  "vendorVariations": {
    "epic": {
      "commonFields": ["RXD.1", "RXD.2", "RXD.3", "RXD.4", "RXD.7"],
      "extensions": ["Custom lot tracking", "Enhanced substitution codes"],
      "notes": "Epic often includes additional tracking fields for controlled substances"
    },
    "cerner": {
      "commonFields": ["RXD.1", "RXD.2", "RXD.3", "RXD.4", "RXD.10"],
      "extensions": ["Automated dispensing integration", "Real-time inventory"],
      "notes": "Cerner emphasizes automation and inventory management"
    },
    "allscripts": {
      "commonFields": ["RXD.1", "RXD.2", "RXD.3", "RXD.7", "RXD.11"],
      "extensions": ["E-prescribing integration", "Formulary checking"],
      "notes": "Strong integration with e-prescribing workflows"
    }
  },
  "crossReferences": {
    "fhir": [
      "MedicationDispense.identifier",
      "MedicationDispense.medication",
      "MedicationDispense.whenHandedOver",
      "MedicationDispense.quantity",
      "MedicationDispense.daysSupply",
      "MedicationDispense.performer",
      "MedicationDispense.substitution",
      "MedicationDispense.note",
      "MedicationDispense.dosageInstruction"
    ],
    "related": [
      "RXE (Pharmacy/Treatment Encoded Order)",
      "RXO (Pharmacy/Treatment Order)",
      "RXA (Pharmacy/Treatment Administration)",
      "RXC (Pharmacy/Treatment Component Order)",
      "ORC (Common Order)",
      "PID (Patient Identification)"
    ]
  },
  "examples": [
    {
      "name": "Standard Medication Dispense",
      "segment": "RXD|1|00074-3943-02^Lipitor 20mg^NDC|20230315143000|30|TAB^Tablet^HL70162|ORAL^Oral^FDA|RX2023031501|5|Take with food|12345^Smith^John^A^^^PharmD^NPI^1234567890|1|40^MG||||||||||||||||",
      "description": "Basic cholesterol medication dispense with standard fields"
    },
    {
      "name": "Controlled Substance Dispense",
      "segment": "RXD|1|00555-0808-02^OxyContin 10mg^NDC|20230315150000|20|TAB^Tablet^HL70162|ORAL^Oral^FDA|RX2023031502|0|No refills - controlled substance|67890^Johnson^Mary^B^^^PharmD^NPI^0987654321|0|20^MG|HOME^123 Oak St^Anytown^TX^75001^USA|Y|SECURE^Secure Handling^LOCAL|10|MG^Milligram^UCUM|LOT456DEF|20251030|PURDUE^Purdue Pharma^MANUFACTURER|M25.50^Chronic Pain^ICD10|20|TAB^Tablet^HL70162",
      "description": "Controlled substance with enhanced tracking and security requirements"
    },
    {
      "name": "Liquid Medication Dispense",
      "segment": "RXD|1|00378-6045-01^Amoxicillin Suspension^NDC|20230315144500|150|ML^Milliliter^UCUM|ORAL^Oral^FDA|RX2023031503|2|Shake well before use|11111^Davis^Robert^C^^^PharmD^NPI^1111111111|0|250^MG|||||||||||||5|ML^Milliliter^UCUM|||||",
      "description": "Liquid antibiotic with volume-based dispensing"
    }
  ],
  "notes": [
    "RXD segments are typically used in response to pharmacy order messages",
    "The segment supports both unit-dose and bulk dispensing scenarios",
    "Substitution tracking is critical for clinical and regulatory compliance",
    "Lot numbers and expiration dates are required for recalls and safety",
    "The segment accommodates both retail and institutional pharmacy workflows",
    "Multiple RXD segments may be sent for partial fills or split dispensing",
    "Integration with automated dispensing systems often extends field usage"
  ],
  "generationRules": {
    "fieldPopulation": {
      "required": ["RXD.1", "RXD.2", "RXD.3", "RXD.4", "RXD.7"],
      "recommended": ["RXD.5", "RXD.8", "RXD.9", "RXD.10", "RXD.11"],
      "situational": ["RXD.18", "RXD.19", "RXD.20", "RXD.21"]
    },
    "dataConsistency": {
      "dispenseAmountUnits": "RXD.4 and RXD.5 must be compatible",
      "strengthConsistency": "RXD.16 and RXD.17 should match medication profile",
      "expirationLogic": "RXD.19 must be future date at time of dispense",
      "refillValidation": "RXD.8 cannot exceed original prescription allowance"
    },
    "businessRules": {
      "controlledSubstances": "Enhanced tracking fields required for schedules II-V",
      "partialFills": "Multiple RXD segments may represent complete prescription",
      "substitution": "RXD.11 must reflect actual substitution performed",
      "inventory": "Lot numbers critical for recall and expiration management"
    },
    "messageFlow": {
      "triggers": ["Prescription fill", "Partial dispense", "Medication sync"],
      "responses": ["Dispense confirmation", "Inventory update", "Billing record"],
      "workflow": "Usually follows RXE (order) and precedes RXA (administration)"
    }
  }
}
