{
  "segment": "EVN",
  "name": "Event Type",
  "description": "The EVN segment is used to communicate necessary trigger event information to receiving applications. It identifies the type of trigger event and provides timing information about when the event was recorded, planned, or occurred.",
  "standard": "hl7v23",
  "version": "2.3",
  "usage": "R",
  "cardinality": {
    "min": 1,
    "max": 1,
    "note": "EVN segment is required and appears once per message in ADT and other event-driven messages"
  },
  "messageTypes": [
    "ADT^A01", "ADT^A02", "ADT^A03", "ADT^A04", "ADT^A05", "ADT^A06", "ADT^A07", "ADT^A08",
    "ADT^A09", "ADT^A10", "ADT^A11", "ADT^A12", "ADT^A13", "ADT^A14", "ADT^A15", "ADT^A16",
    "ADT^A17", "ADT^A18", "ADT^A21", "ADT^A22", "ADT^A23", "ADT^A24", "ADT^A25", "ADT^A26",
    "ADT^A27", "ADT^A28", "ADT^A29", "ADT^A31", "ADT^A32", "ADT^A33", "ADT^A37", "ADT^A38"
  ],
  "fields": {
    "EVN.1": {
      "name": "Event Type Code",
      "description": "This field contains codes that correspond to the trigger events. This field identifies the specific ADT event that triggered the message transmission.",
      "dataType": "ID",
      "usage": "O",
      "maxLength": 3,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "validValues": [
        {"code": "A01", "description": "Admit/visit notification"},
        {"code": "A02", "description": "Transfer a patient"},
        {"code": "A03", "description": "Discharge/end visit"},
        {"code": "A04", "description": "Register a patient"},
        {"code": "A05", "description": "Pre-admit a patient"},
        {"code": "A06", "description": "Change an outpatient to an inpatient"},
        {"code": "A07", "description": "Change an inpatient to an outpatient"},
        {"code": "A08", "description": "Update patient information"},
        {"code": "A09", "description": "Patient departing - tracking"},
        {"code": "A10", "description": "Patient arriving - tracking"},
        {"code": "A11", "description": "Cancel admit/visit notification"},
        {"code": "A12", "description": "Cancel transfer"},
        {"code": "A13", "description": "Cancel discharge/end visit"},
        {"code": "A14", "description": "Pending admit"},
        {"code": "A15", "description": "Pending transfer"},
        {"code": "A16", "description": "Pending discharge"},
        {"code": "A17", "description": "Swap patients"},
        {"code": "A18", "description": "Merge patient information"},
        {"code": "A21", "description": "Patient goes on a leave of absence"},
        {"code": "A22", "description": "Patient returns from a leave of absence"},
        {"code": "A23", "description": "Delete a patient record"},
        {"code": "A24", "description": "Link patient information"},
        {"code": "A25", "description": "Cancel pending discharge"},
        {"code": "A26", "description": "Cancel pending transfer"},
        {"code": "A27", "description": "Cancel pending admit"},
        {"code": "A28", "description": "Add person information"},
        {"code": "A29", "description": "Delete person information"},
        {"code": "A31", "description": "Update person information"},
        {"code": "A32", "description": "Cancel patient arriving - tracking"},
        {"code": "A33", "description": "Cancel patient departing - tracking"},
        {"code": "A37", "description": "Unlink patient information"},
        {"code": "A38", "description": "Cancel pre-admit"}
      ],
      "generationHint": "Most common: A01 (admit), A02 (transfer), A03 (discharge), A04 (register), A08 (update)"
    },
    "EVN.2": {
      "name": "Recorded Date/Time",
      "description": "This field contains the date and time the event was entered into the application by the operator. Most systems will default to the system date/time when the transaction was entered.",
      "dataType": "TS",
      "usage": "R",
      "maxLength": 26,
      "cardinality": {
        "min": 1,
        "max": 1
      },
      "generationHint": "Format: YYYYMMDDHHMMSS, typically current system time when event recorded"
    },
    "EVN.3": {
      "name": "Date/Time Planned Event",
      "description": "This field contains the date and time the event was originally planned to occur. Used for scheduling and tracking purposes.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "generationHint": "Future timestamp for planned events, may be same as or before EVN.2"
    },
    "EVN.4": {
      "name": "Event Reason Code",
      "description": "This field describes the reason for the event occurring (e.g., patient request, physician order, census management, etc.). Values from user-defined table 0062.",
      "dataType": "IS",
      "usage": "O",
      "maxLength": 3,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "validValues": [
        {"code": "01", "description": "Patient request"},
        {"code": "02", "description": "Physician/health practitioner order"},
        {"code": "03", "description": "Census management"},
        {"code": "O", "description": "Other"},
        {"code": "U", "description": "Unknown"}
      ],
      "generationHint": "Common reasons: 01 (patient request), 02 (physician order), 03 (census management)"
    },
    "EVN.5": {
      "name": "Operator ID",
      "description": "This field identifies the individual responsible for triggering the event. Uses extended composite ID number and name format for the person who entered the transaction.",
      "dataType": "XCN",
      "usage": "O",
      "maxLength": 60,
      "cardinality": {
        "min": 0,
        "max": "*"
      },
      "generationHint": "Format: <id>^<last_name>^<first_name>^<credentials>, e.g., '12345^SMITH^JOHN^RN'"
    },
    "EVN.6": {
      "name": "Event Occurred",
      "description": "This field indicates the actual date and time when the triggering event occurred. This may be different from when it was recorded in the system (EVN.2).",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "generationHint": "Actual event occurrence time, may be earlier than EVN.2 (recorded time)"
    }
  },
  "crossReferences": {
    "fhir": [
      "Encounter.status",
      "Encounter.period",
      "AuditEvent.recorded"
    ],
    "related": ["MSH", "PID", "PV1", "ORC"]
  },
  "examples": [
    "EVN|A01|200202150945|||ADMIN^SMITH^JOHN^RN|200202150930",
    "EVN|A08|20220815143022|20220815140000|02|12345^DOE^JANE^MD|20220815142500",
    "EVN|A03|20220816090000||01|54321^JONES^MARY^RN|20220816085500",
    "EVN||200202150945|||CLERK^JOHNSON^BOB||200202150930"
  ],
  "notes": [
    "EVN segment is required for all ADT message types",
    "EVN.2 (Recorded Date/Time) is the only required field in HL7 v2.3",
    "EVN.1 should match the trigger event from MSH.9 when populated",
    "EVN.6 (Event Occurred) often differs from EVN.2 (when recorded in system)",
    "Generation hints guide realistic data creation for different event types"
  ],
  "generationRules": {
    "required": ["EVN.2"],
    "conditional": {
      "EVN.1": "Should match MSH.9 message type if present",
      "EVN.6": "Should be populated for completed events"
    },
    "relationships": {
      "EVN.1_MSH.9": "Event type should correspond to message type",
      "EVN.2_EVN.6": "Recorded time typically >= occurrence time",
      "EVN.3_EVN.6": "Planned time may be != occurrence time"
    },
    "validation": {
      "EVN.1": "Must be valid HL7 Table 0003 event type",
      "EVN.4": "Must be valid user-defined table 0062 if present",
      "EVN.2": "Must be valid timestamp format"
    }
  }
}