{
  "segment": "AL1",
  "name": "Patient Allergy Information",
  "description": "The AL1 segment contains patient allergy information of various types. Most healthcare applications handle two types of allergies: drug allergies and other allergies (food, environmental, etc.). Multiple AL1 segments can be included in a message to communicate multiple patient allergies.",
  "standard": "hl7v23",
  "version": "2.3",
  "usage": "O",
  "cardinality": {
    "min": 0,
    "max": "*",
    "note": "Multiple AL1 segments can appear to communicate multiple allergies"
  },
  "messageTypes": [
    "ADT^A01", "ADT^A02", "ADT^A03", "ADT^A04", "ADT^A05", "ADT^A06", "ADT^A07", "ADT^A08",
    "ADT^A09", "ADT^A10", "ADT^A11", "ADT^A12", "ADT^A13", "ADT^A14", "ADT^A15", "ADT^A16",
    "ADT^A17", "ADT^A18", "ADT^A21", "ADT^A22", "ADT^A23", "ADT^A24", "ADT^A25", "ADT^A26",
    "ADT^A27", "ADT^A28", "ADT^A29", "ADT^A31", "ADT^A32", "ADT^A33", "ADT^A37", "ADT^A38"
  ],
  "fields": {
    "AL1.1": {
      "name": "Set ID - AL1",
      "description": "This field contains the number that identifies this AL1 transaction. For the first occurrence of the segment, the sequence number shall be one; for the second occurrence, the sequence number shall be two; etc.",
      "dataType": "SI",
      "usage": "R",
      "maxLength": 4,
      "cardinality": {
        "min": 1,
        "max": 1
      },
      "generationHint": "Sequential number starting from 1 for each AL1 in a message"
    },
    "AL1.2": {
      "name": "Allergen Type Code",
      "description": "This field identifies the type of allergen. It contains values from user-defined table 0127.",
      "dataType": "IS",
      "usage": "O",
      "maxLength": 2,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "validValues": [
        {"code": "DA", "description": "Drug allergy"},
        {"code": "FA", "description": "Food allergy"},
        {"code": "MA", "description": "Miscellaneous allergy"},
        {"code": "MC", "description": "Miscellaneous contraindication"},
        {"code": "EA", "description": "Environmental allergy"}
      ],
      "generationHint": "Most common: DA (drug allergy), FA (food allergy), EA (environmental)"
    },
    "AL1.3": {
      "name": "Allergen Code/Mnemonic/Description",
      "description": "This field identifies the specific allergen. The code is drawn from a coding system. This may contain drug codes (RxNorm, NDC), food codes, or other allergen identifiers.",
      "dataType": "CE",
      "usage": "R",
      "maxLength": 60,
      "cardinality": {
        "min": 1,
        "max": 1
      },
      "validValues": [
        {"code": "1191", "description": "Aspirin", "system": "RxNorm"},
        {"code": "7804", "description": "Penicillin", "system": "RxNorm"},
        {"code": "2670", "description": "Codeine", "system": "RxNorm"},
        {"code": "8150", "description": "Sulfonamides", "system": "RxNorm"},
        {"code": "PNUT", "description": "Peanuts", "system": "LOCAL"},
        {"code": "SHELL", "description": "Shellfish", "system": "LOCAL"},
        {"code": "LATEX", "description": "Latex", "system": "LOCAL"},
        {"code": "POLLEN", "description": "Pollen", "system": "LOCAL"},
        {"code": "DUST", "description": "Dust mites", "system": "LOCAL"}
      ],
      "generationHint": "Format: <code>^<text>^<coding_system>, use common drug/food/environmental allergens"
    },
    "AL1.4": {
      "name": "Allergy Severity Code",
      "description": "This field describes the severity of the allergy. Values are from user-defined table 0128.",
      "dataType": "IS",
      "usage": "O",
      "maxLength": 2,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "validValues": [
        {"code": "SV", "description": "Severe"},
        {"code": "MO", "description": "Moderate"},
        {"code": "MI", "description": "Mild"},
        {"code": "U", "description": "Unknown"}
      ],
      "generationHint": "Most common: SV (severe) for drugs, MO (moderate) for foods, MI (mild) for environmental"
    },
    "AL1.5": {
      "name": "Allergy Reaction Code",
      "description": "This field describes the type of reaction that may be expected if the patient is exposed to the allergen. Multiple reactions may be recorded.",
      "dataType": "ST",
      "usage": "O",
      "maxLength": 15,
      "cardinality": {
        "min": 0,
        "max": "*"
      },
      "validValues": [
        {"code": "RASH", "description": "Skin rash"},
        {"code": "HIVES", "description": "Hives/urticaria"},
        {"code": "ITCHING", "description": "Itching"},
        {"code": "NAUSEA", "description": "Nausea"},
        {"code": "VOMITING", "description": "Vomiting"},
        {"code": "DIARRHEA", "description": "Diarrhea"},
        {"code": "ANAPHYLAXIS", "description": "Anaphylactic reaction"},
        {"code": "SOB", "description": "Shortness of breath"},
        {"code": "SWELLING", "description": "Swelling"},
        {"code": "FEVER", "description": "Fever"}
      ],
      "generationHint": "Common reactions: RASH, HIVES, ANAPHYLAXIS, SOB for severe reactions"
    },
    "AL1.6": {
      "name": "Identification Date",
      "description": "This field contains the date that the allergy was identified. This is typically when the allergy was first documented or diagnosed.",
      "dataType": "DT",
      "usage": "O",
      "maxLength": 8,
      "cardinality": {
        "min": 0,
        "max": 1
      },
      "generationHint": "Format: YYYYMMDD, typically a historical date when allergy was first identified"
    }
  },
  "crossReferences": {
    "fhir": [
      "AllergyIntolerance.code",
      "AllergyIntolerance.category",
      "AllergyIntolerance.criticality",
      "AllergyIntolerance.reaction"
    ],
    "related": ["PID", "PV1", "ADT"]
  },
  "examples": [
    "AL1|1|DA|1191^Aspirin^RxNorm|SV|ANAPHYLAXIS|20200315",
    "AL1|2|FA|PNUT^Peanuts^LOCAL|SV|HIVES~SWELLING|20180422",
    "AL1|3|DA|7804^Penicillin^RxNorm|MO|RASH~ITCHING|20150708",
    "AL1|1|EA|POLLEN^Tree pollen^LOCAL|MI|SOB~ITCHING|20190520"
  ],
  "notes": [
    "AL1 segment can appear multiple times to report multiple allergies",
    "AL1.1 (Set ID) is required and should be sequential within a message",
    "AL1.3 (Allergen Code) is required and should identify the specific allergen",
    "Multiple reaction codes can be sent in AL1.5 separated by repetition separators",
    "Allergy severity and reactions are critical for clinical decision support systems"
  ],
  "generationRules": {
    "required": ["AL1.1", "AL1.3"],
    "conditional": {
      "AL1.2": "Should be provided to categorize the allergy type",
      "AL1.4": "Should be provided for clinical decision support",
      "AL1.5": "Should be provided to describe expected reactions",
      "AL1.6": "Should be provided when allergy identification date is known"
    },
    "relationships": {
      "AL1.2_AL1.3": "Allergen type should align with allergen code category",
      "AL1.4_AL1.5": "Severity should align with reaction types (severe = anaphylaxis)",
      "AL1.5_multiple": "Multiple reactions can be reported using repetition"
    },
    "validation": {
      "AL1.2": "Must be valid allergen type from user-defined table 0127",
      "AL1.4": "Must be valid severity code from user-defined table 0128",
      "AL1.6": "Must be valid date format YYYYMMDD"
    }
  }
}
