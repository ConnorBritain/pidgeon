{
  "segment": "MSH",
  "name": "Message Header",
  "description": "The MSH segment defines the intent, source, destination, and some specifics of the syntax of a message.",
  "standard": "hl7v23",
  "version": "2.3",
  "usage": "R",
  "cardinality": {
    "min": 1,
    "max": 1,
    "note": "MSH segment is required and appears exactly once at the start of every HL7 message"
  },
  "messageTypes": ["*"],
  "fields": {
    "MSH.1": {
      "name": "Field Separator",
      "description": "This field contains the separator between the segment ID and the first real field, MSH.2 Encoding Characters.",
      "dataType": "ST",
      "usage": "R",
      "cardinality": {"min": 1, "max": 1},
      "maxLength": 1,
      "examples": ["|"],
      "validValues": [
        {"code": "|", "description": "Standard field separator"}
      ],
      "generationHint": "Always '|' character"
    },
    "MSH.2": {
      "name": "Encoding Characters",
      "description": "This field contains the four encoding characters in the following order: component separator, repetition separator, escape character, and subcomponent separator.",
      "dataType": "ST", 
      "usage": "R",
      "cardinality": {"min": 1, "max": 1},
      "maxLength": 4,
      "examples": ["^~\\&"],
      "validValues": [
        {"code": "^~\\&", "description": "Standard encoding characters"}
      ],
      "generationHint": "Always '^~\\&' for standard HL7 encoding"
    },
    "MSH.3": {
      "name": "Sending Application",
      "description": "This field uniquely identifies the sending application among all other applications within the network enterprise.",
      "dataType": "HD",
      "usage": "O",
      "cardinality": {"min": 0, "max": 1},
      "maxLength": 180,
      "examples": ["GHH LAB", "EPIC", "LAB SYSTEM", "CERNER"],
      "generationHint": "Generate realistic application name or system identifier"
    },
    "MSH.4": {
      "name": "Sending Facility",
      "description": "This field further describes the sending application as a particular facility.",
      "dataType": "HD",
      "usage": "O",
      "cardinality": {"min": 0, "max": 1},
      "maxLength": 180,
      "examples": ["ELAB-3", "MAIN HOSPITAL", "WEST WING", "LAB-01"],
      "generationHint": "Generate facility or department identifier"
    },
    "MSH.5": {
      "name": "Receiving Application",
      "description": "This field uniquely identifies the receiving application among all other applications within the network enterprise.",
      "dataType": "HD",
      "usage": "O",
      "cardinality": {"min": 0, "max": 1},
      "maxLength": 180,
      "examples": ["GHH OE", "HIS", "EMR SYSTEM"],
      "generationHint": "Generate realistic receiving application name"
    },
    "MSH.6": {
      "name": "Receiving Facility",
      "description": "This field identifies the receiving application as a particular facility.",
      "dataType": "HD",
      "usage": "O",
      "cardinality": {"min": 0, "max": 1},
      "maxLength": 180,
      "examples": ["BLDG4", "EAST CAMPUS", "UNIT-2"],
      "generationHint": "Generate receiving facility identifier"
    },
    "MSH.7": {
      "name": "Date/Time of Message", 
      "description": "This field contains the date/time that the sending system created the message.",
      "dataType": "TS",
      "usage": "O",
      "cardinality": {"min": 0, "max": 1},
      "examples": ["200202150930", "20220815143022", "20220815143022-0500"],
      "generationHint": "Generate current timestamp in YYYYMMDDHHMMSS format"
    },
    "MSH.9": {
      "name": "Message Type",
      "description": "This field contains the message type, trigger event, and the message structure ID for the message.",
      "dataType": "MSG",
      "usage": "R",
      "cardinality": {"min": 1, "max": 1},
      "examples": ["ADT^A01", "ORU^R01", "RDE^O11", "ORM^O01"],
      "generationHint": "Must match the intended message type being generated",
      "components": {
        "MSH.9.1": {
          "name": "Message Code",
          "description": "HL7-defined message types.",
          "dataType": "ID",
          "usage": "R",
          "cardinality": {"min": 1, "max": 1},
          "table": "0076",
          "validValues": [
            {"code": "ADT", "description": "Admit/Discharge/Transfer"},
            {"code": "ORU", "description": "Observation Result"},
            {"code": "RDE", "description": "Pharmacy/Treatment Encoded Order"},
            {"code": "ORM", "description": "Order"},
            {"code": "VXU", "description": "Vaccination Update"}
          ],
          "examples": ["ADT", "ORU", "RDE"]
        },
        "MSH.9.2": {
          "name": "Trigger Event",
          "description": "HL7-defined trigger events.",
          "dataType": "ID", 
          "usage": "R",
          "cardinality": {"min": 1, "max": 1},
          "table": "0003",
          "validValues": [
            {"code": "A01", "description": "Admit/Visit Notification"},
            {"code": "A08", "description": "Update Patient Information"},
            {"code": "R01", "description": "ORU/R01 - Observation Result"},
            {"code": "O11", "description": "RDE - Pharmacy/Treatment Encoded Order"}
          ],
          "examples": ["A01", "R01", "O11"]
        }
      }
    },
    "MSH.10": {
      "name": "Message Control ID",
      "description": "This field contains a number or other identifier that uniquely identifies the message.",
      "dataType": "ST",
      "usage": "R",
      "cardinality": {"min": 1, "max": 1},
      "maxLength": 20,
      "examples": ["CNTRL-3456", "MSG001234", "20220815-001"],
      "generationHint": "Generate unique message identifier, can be sequential or GUID-based"
    },
    "MSH.11": {
      "name": "Processing ID",
      "description": "This field is used to decide whether to process the message as defined in HL7 Application (level 7) Processing rules.",
      "dataType": "PT",
      "usage": "R",
      "cardinality": {"min": 1, "max": 1},
      "validValues": [
        {"code": "P", "description": "Production"},
        {"code": "T", "description": "Training"},
        {"code": "D", "description": "Debugging"}
      ],
      "examples": ["P", "T", "D"],
      "generationHint": "Use 'T' for test data, 'P' for production simulation"
    },
    "MSH.12": {
      "name": "Version ID",
      "description": "This field is used to identify the version of the HL7 standard used in this message.",
      "dataType": "VID",
      "usage": "R", 
      "cardinality": {"min": 1, "max": 1},
      "validValues": [
        {"code": "2.3", "description": "HL7 Version 2.3"},
        {"code": "2.4", "description": "HL7 Version 2.4"},
        {"code": "2.5", "description": "HL7 Version 2.5"}
      ],
      "examples": ["2.3"],
      "generationHint": "Must be '2.3' for hl7v23 messages"
    }
  },
  "vendorVariations": {
    "epic": {
      "vendor": "Epic",
      "notes": [
        "Epic typically uses facility-specific application names in MSH.3",
        "Epic often includes detailed facility codes in MSH.4 and MSH.6",
        "Epic message control IDs often follow specific formatting patterns"
      ],
      "examples": {
        "MSH.3": ["EPIC", "MYCHART", "EPIC-PROD"],
        "MSH.4": ["MAIN", "WEST", "EAST"],
        "MSH.10": ["EPIC123456789", "MC-20220815-001"]
      }
    },
    "cerner": {
      "vendor": "Cerner",
      "notes": [
        "Cerner uses 'CERNER' or facility-specific names in sending application",
        "Cerner message control IDs are often numeric or alphanumeric"
      ],
      "examples": {
        "MSH.3": ["CERNER", "POWERCHART", "CERNER-HIS"],
        "MSH.10": ["1234567890", "CER-001234"]
      }
    }
  },
  "examples": [
    "MSH|^~\\&|GHH LAB|ELAB-3|GHH OE|BLDG4|200202150930||ORU^R01|CNTRL-3456|P|2.3",
    "MSH|^~\\&|EPIC|MAIN|HIS|UNIT-1|20220815143022||ADT^A01|EPIC123456|T|2.3"
  ],
  "notes": [
    "MSH segment must be the first segment in every HL7 message",
    "MSH.1 and MSH.2 define the encoding rules for the entire message",
    "MSH.9 (Message Type) determines which other segments are allowed/required",
    "MSH.10 (Message Control ID) should be unique for message tracking",
    "MSH.11 (Processing ID) indicates whether this is production, test, or debug data"
  ]
}