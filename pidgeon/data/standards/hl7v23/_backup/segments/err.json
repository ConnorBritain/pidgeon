{
  "segment": "ERR",
  "name": "Error",
  "description": "The Error segment (ERR) is used to report errors and warnings that are detected during message processing. This segment provides detailed error information beyond the basic acknowledgment codes, including specific field locations, error types, and diagnostic information. It is essential for system debugging, interface monitoring, and ensuring data quality in healthcare message exchanges.",
  "standard": "hl7v23",
  "version": "2.3",
  "usage": "O",
  "cardinality": {
    "min": 0,
    "max": 1,
    "note": "ERR provides detailed error information when message processing issues occur"
  },
  "messageTypes": ["ACK^A01", "ACK^A04", "ACK^A08", "ACK^O01", "ACK^R01", "ACK^S12", "NAK"],
  "fields": {
    "ERR.1": {
      "name": "Error Code and Location",
      "description": "This field contains the error code and identifies the segment, sequence, field, and component where the error occurred.",
      "dataType": "ELD",
      "usage": "O",
      "maxLength": 493,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Format: Segment^Sequence^Field^Component~ErrorCode^ErrorText",
      "example": "PID^1^3^1~101^Required field missing^HL70357"
    },
    "ERR.2": {
      "name": "Error Location",
      "description": "This field contains the specific location information about where the error occurred in the message.",
      "dataType": "ERL",
      "usage": "O",
      "maxLength": 18,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Format: Segment^Sequence^Field^Component",
      "example": "PID^1^3^1"
    },
    "ERR.3": {
      "name": "HL7 Error Code",
      "description": "This field contains the HL7-defined error code that categorizes the type of error.",
      "dataType": "CWE",
      "usage": "R",
      "maxLength": 250,
      "cardinality": {"min": 1, "max": 1},
      "validValues": ["0", "100", "101", "102", "103", "200", "201", "202", "203", "204", "205", "206", "207"],
      "generationHint": "Standard HL7 error codes from Table 0357",
      "example": "101^Required field missing^HL70357"
    },
    "ERR.4": {
      "name": "Severity",
      "description": "This field contains the severity level of the error or warning.",
      "dataType": "ID",
      "usage": "R",
      "maxLength": 2,
      "cardinality": {"min": 1, "max": 1},
      "validValues": ["E", "F", "I", "W"],
      "generationHint": "E=Error, F=Fatal Error, I=Information, W=Warning",
      "example": "E"
    },
    "ERR.5": {
      "name": "Application Error Code",
      "description": "This field contains application-specific error codes that provide more detailed error information.",
      "dataType": "CWE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Custom application error codes for specific business rules",
      "example": "VALIDATION_001^Invalid patient demographics format^LOCAL"
    },
    "ERR.6": {
      "name": "Application Error Parameter",
      "description": "This field contains parameters related to the application error that provide additional context.",
      "dataType": "ST",
      "usage": "O",
      "maxLength": 80,
      "cardinality": {"min": 0, "max": 10},
      "generationHint": "Additional parameters that provide context for the error",
      "example": "Expected format: YYYYMMDD, Received: 23/03/15"
    },
    "ERR.7": {
      "name": "Diagnostic Information",
      "description": "This field contains free text diagnostic information about the error.",
      "dataType": "TX",
      "usage": "O",
      "maxLength": 2048,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Detailed diagnostic text for troubleshooting",
      "example": "Patient ID validation failed: ID length must be exactly 10 characters, received 8 characters"
    },
    "ERR.8": {
      "name": "User Message",
      "description": "This field contains a user-friendly error message suitable for display to end users.",
      "dataType": "TX",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Human-readable error message for user interfaces",
      "example": "Please verify patient information and try again"
    },
    "ERR.9": {
      "name": "Inform Person Indicator",
      "description": "This field indicates which person or role should be informed about this error.",
      "dataType": "IS",
      "usage": "O",
      "maxLength": 20,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["USER", "ADMIN", "SUPPORT", "DEVELOPER"],
      "generationHint": "Who should be notified about this error",
      "example": "ADMIN"
    },
    "ERR.10": {
      "name": "Override Type",
      "description": "This field indicates whether and how this error can be overridden.",
      "dataType": "CWE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["NOT_ALLOWED", "ALLOWED", "REQUIRED", "CONDITIONAL"],
      "generationHint": "Override capability for this error condition",
      "example": "ALLOWED^Override permitted with supervisor approval^LOCAL"
    },
    "ERR.11": {
      "name": "Override Reason Code",
      "description": "This field contains coded reasons for why an error override was performed.",
      "dataType": "CWE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["CLINICAL_NECESSITY", "SYSTEM_LIMITATION", "DATA_CORRECTION", "EMERGENCY"],
      "generationHint": "Reason for error override when applicable",
      "example": "CLINICAL_NECESSITY^Clinical necessity override^OVERRIDE_REASON"
    },
    "ERR.12": {
      "name": "Help Desk Contact Point",
      "description": "This field contains contact information for getting help with this error.",
      "dataType": "XTN",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Contact information for error support",
      "example": "^WPN^PH^^^555^1234567^X123"
    }
  },
  "vendorVariations": {
    "epic": {
      "commonFields": ["ERR.2", "ERR.3", "ERR.4", "ERR.7", "ERR.8"],
      "extensions": ["Smart error categorization", "Auto-resolution suggestions", "Error trend analysis"],
      "notes": "Epic provides intelligent error analysis with resolution recommendations"
    },
    "cerner": {
      "commonFields": ["ERR.3", "ERR.4", "ERR.5", "ERR.7", "ERR.9"],
      "extensions": ["Automated error escalation", "Integration with monitoring tools", "Performance impact tracking"],
      "notes": "Cerner emphasizes automated error management and system performance monitoring"
    },
    "allscripts": {
      "commonFields": ["ERR.3", "ERR.4", "ERR.7", "ERR.8", "ERR.12"],
      "extensions": ["User-friendly error messages", "Context-sensitive help", "Support ticket integration"],
      "notes": "Allscripts focuses on user experience and integrated support workflows"
    },
    "interfaceware": {
      "commonFields": ["ERR.2", "ERR.3", "ERR.4", "ERR.5", "ERR.7"],
      "extensions": ["Message transformation tracking", "Data lineage analysis", "Custom error handling"],
      "notes": "Interface engines provide detailed transformation and data flow error tracking"
    }
  },
  "crossReferences": {
    "fhir": [
      "OperationOutcome.issue.severity",
      "OperationOutcome.issue.code",
      "OperationOutcome.issue.details",
      "OperationOutcome.issue.diagnostics",
      "OperationOutcome.issue.location",
      "OperationOutcome.issue.expression",
      "MessageHeader.response.details"
    ],
    "related": [
      "MSA (Message Acknowledgment)",
      "MSH (Message Header)",
      "NTE (Notes and Comments)",
      "QAK (Query Acknowledgment)",
      "QPD (Query Parameter Definition)"
    ]
  },
  "examples": [
    {
      "name": "Required Field Missing Error",
      "segment": "ERR||PID^1^3^1|101^Required field missing^HL70357|E|VALIDATION_001^Patient ID is required^LOCAL|Expected: 10-digit patient ID|Patient identification number is required for registration|USER||",
      "description": "Error indicating a required patient ID field is missing"
    },
    {
      "name": "Data Type Format Error",
      "segment": "ERR||PID^1^7^1|102^Data type error^HL70357|E|FORMAT_001^Invalid date format^LOCAL|Expected: YYYYMMDD, Received: 23/03/15|Please enter date in YYYYMMDD format|USER|ALLOWED^Override permitted^LOCAL|",
      "description": "Error for incorrect date format with override capability"
    },
    {
      "name": "Application Logic Warning",
      "segment": "ERR||PV1^1^44^1|200^Unsupported message type^HL70357|W|BUSINESS_001^Unusual discharge time^LOCAL|Discharge time is after midnight|Discharge time appears unusual - please verify|ADMIN|NOT_ALLOWED^Override not permitted^LOCAL||^WPN^PH^^^555^1234567^X123",
      "description": "Business logic warning with admin notification and support contact"
    },
    {
      "name": "Fatal System Error",
      "segment": "ERR|||207^Application internal error^HL70357|F|SYSTEM_001^Database connection failure^LOCAL|Connection timeout after 30 seconds|System temporarily unavailable - please try again later|SUPPORT|||^WPN^PH^^^555^9876543^X456",
      "description": "Fatal system error requiring support intervention"
    },
    {
      "name": "Information Message",
      "segment": "ERR|||0^Message accepted^HL70357|I|INFO_001^Patient merged successfully^LOCAL||Patient records have been successfully merged|USER|NOT_ALLOWED^Information only^LOCAL|",
      "description": "Informational message about successful patient merge"
    }
  ],
  "notes": [
    "ERR segments provide detailed error information beyond basic MSA acknowledgment codes",
    "Multiple ERR segments may be included in a single acknowledgment message for multiple errors",
    "Error severity levels determine the appropriate response and escalation procedures",
    "Location information pinpoints exactly where in the message the error occurred",
    "Application error codes provide business-specific error categorization",
    "Override capabilities support workflow flexibility while maintaining audit trails",
    "User messages should be appropriate for display in client applications"
  ],
  "generationRules": {
    "fieldPopulation": {
      "required": ["ERR.3", "ERR.4"],
      "recommended": ["ERR.2", "ERR.7", "ERR.8"],
      "situational": ["ERR.5", "ERR.6", "ERR.9", "ERR.10", "ERR.11", "ERR.12"]
    },
    "dataConsistency": {
      "severityAlignment": "ERR.4 severity must align with error impact and required actions",
      "locationAccuracy": "ERR.2 must accurately identify the error location in the original message",
      "messageCoherence": "ERR.7 and ERR.8 should provide consistent but appropriately detailed information",
      "overrideLogic": "ERR.10 and ERR.11 should only be present when override scenarios apply"
    },
    "businessRules": {
      "errorEscalation": "Fatal errors require immediate system attention and support notification",
      "userCommunication": "User messages must be actionable and appropriate for the audience",
      "auditRequirements": "All errors should be logged for system monitoring and improvement",
      "overrideControl": "Override capabilities must align with organizational policies"
    },
    "messageFlow": {
      "triggers": ["Data validation failures", "Business rule violations", "System exceptions"],
      "responses": ["User notification", "System alerts", "Support escalation"],
      "workflow": "Critical component of reliable message processing and system monitoring"
    },
    "errorCategories": {
      "E": "Processing error requiring user or system action",
      "F": "Fatal error preventing message processing",
      "I": "Informational message for user awareness",
      "W": "Warning about potential issues but processing continues"
    }
  }
}
