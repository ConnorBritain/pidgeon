{
  "segment": "PRB",
  "name": "Problem Details",
  "description": "The Problem Details segment (PRB) contains information about patient problems, conditions, and diagnoses that extend beyond the basic diagnosis information in DG1. This segment supports comprehensive clinical problem documentation including onset, resolution, management details, and care team coordination. It is essential for care planning, chronic disease management, and clinical quality reporting.",
  "standard": "hl7v23",
  "version": "2.3",
  "usage": "O",
  "cardinality": {
    "min": 0,
    "max": 1,
    "note": "PRB provides detailed problem documentation when clinical details are needed"
  },
  "messageTypes": ["ADT^A01", "ADT^A04", "ADT^A08", "ORU^R01", "PPR^PC1", "PPR^PC2", "PPR^PC3"],
  "fields": {
    "PRB.1": {
      "name": "Action Code",
      "description": "This field contains the action code that indicates what action is being taken with this problem record.",
      "dataType": "ID",
      "usage": "R",
      "maxLength": 2,
      "cardinality": {"min": 1, "max": 1},
      "validValues": ["AD", "CO", "DE", "LI", "UC", "UN", "UP"],
      "generationHint": "AD=Add, CO=Correct, DE=Delete, LI=Link, UC=Unchanged, UN=Unlink, UP=Update",
      "example": "AD"
    },
    "PRB.2": {
      "name": "Action Date/Time",
      "description": "This field contains the date and time when the action specified in PRB.1 was taken.",
      "dataType": "TS",
      "usage": "R",
      "maxLength": 26,
      "cardinality": {"min": 1, "max": 1},
      "generationHint": "Format: YYYYMMDDHHMMSS for precise action tracking",
      "example": "20230315143000"
    },
    "PRB.3": {
      "name": "Problem ID",
      "description": "This field contains a unique identifier for the problem.",
      "dataType": "CE",
      "usage": "R",
      "maxLength": 250,
      "cardinality": {"min": 1, "max": 1},
      "validValues": ["ICD-10-CM codes", "SNOMED CT", "Local problem codes"],
      "generationHint": "Use standard problem/diagnosis coding",
      "example": "E11.9^Type 2 Diabetes Mellitus^ICD10"
    },
    "PRB.4": {
      "name": "Problem Instance ID",
      "description": "This field contains a unique identifier for this specific instance of the problem.",
      "dataType": "EI",
      "usage": "R",
      "maxLength": 60,
      "cardinality": {"min": 1, "max": 1},
      "generationHint": "Unique instance identifier for tracking specific problem occurrences",
      "example": "PROB20230315001^HOSPITAL_SYSTEM"
    },
    "PRB.5": {
      "name": "Episode of Care ID",
      "description": "This field contains an identifier for the episode of care associated with this problem.",
      "dataType": "EI",
      "usage": "O",
      "maxLength": 60,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Links problem to specific care episode",
      "example": "EPISODE20230315001^CARE_SYSTEM"
    },
    "PRB.6": {
      "name": "Problem List Priority",
      "description": "This field indicates the priority of this problem on the patient's problem list.",
      "dataType": "NM",
      "usage": "O",
      "maxLength": 60,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Numeric priority with lower numbers indicating higher priority",
      "example": "1"
    },
    "PRB.7": {
      "name": "Problem Established Date/Time",
      "description": "This field contains the date and time when the problem was first established or diagnosed.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Initial diagnosis or problem identification date",
      "example": "20230301120000"
    },
    "PRB.8": {
      "name": "Anticipated Problem Resolution Date/Time",
      "description": "This field contains the anticipated date and time when the problem is expected to be resolved.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Expected resolution date for acute problems",
      "example": "20230401120000"
    },
    "PRB.9": {
      "name": "Actual Problem Resolution Date/Time",
      "description": "This field contains the actual date and time when the problem was resolved.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Actual resolution date when problem is resolved",
      "example": "20230325140000"
    },
    "PRB.10": {
      "name": "Problem Classification",
      "description": "This field contains a classification of the problem type.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["ACUTE", "CHRONIC", "INTERMITTENT", "RESOLVED"],
      "generationHint": "Clinical classification of problem duration and pattern",
      "example": "CHRONIC^Chronic Condition^PROBLEM_CLASS"
    },
    "PRB.11": {
      "name": "Problem Management Discipline",
      "description": "This field identifies the clinical discipline primarily responsible for managing this problem.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["CARDIOLOGY", "ENDOCRINOLOGY", "FAMILY_MEDICINE", "INTERNAL_MEDICINE"],
      "generationHint": "Primary clinical specialty managing the problem",
      "example": "ENDOCRINOLOGY^Endocrinology^SPECIALTY"
    },
    "PRB.12": {
      "name": "Problem Persistence",
      "description": "This field indicates how persistent or recurring the problem is.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": "250",
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["PERSISTENT", "EPISODIC", "INTERMITTENT", "RESOLVED"],
      "generationHint": "Pattern of problem occurrence",
      "example": "PERSISTENT^Ongoing Problem^PERSISTENCE"
    },
    "PRB.13": {
      "name": "Problem Confirmation Status",
      "description": "This field indicates the confirmation status of the problem diagnosis.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["CONFIRMED", "DIFFERENTIAL", "PROVISIONAL", "RULE_OUT"],
      "generationHint": "Diagnostic certainty level",
      "example": "CONFIRMED^Confirmed Diagnosis^CONFIRMATION"
    },
    "PRB.14": {
      "name": "Problem Life Cycle Status",
      "description": "This field indicates the current life cycle status of the problem.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["ACTIVE", "INACTIVE", "RESOLVED", "REMISSION"],
      "generationHint": "Current status in problem lifecycle",
      "example": "ACTIVE^Active Problem^LIFECYCLE"
    },
    "PRB.15": {
      "name": "Problem Life Cycle Status Date/Time",
      "description": "This field contains the date and time when the life cycle status was last updated.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Date when status was last changed",
      "example": "20230315143000"
    },
    "PRB.16": {
      "name": "Problem Date of Onset",
      "description": "This field contains the date when the problem first began or was first noticed.",
      "dataType": "TS",
      "usage": "O",
      "maxLength": 26,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Initial onset date of symptoms or condition",
      "example": "20230201000000"
    },
    "PRB.17": {
      "name": "Problem Onset Text",
      "description": "This field contains a free text description of when/how the problem began.",
      "dataType": "ST",
      "usage": "O",
      "maxLength": 80,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Narrative description of problem onset",
      "example": "Gradual onset over 3 months with increasing fatigue"
    },
    "PRB.18": {
      "name": "Problem Ranking",
      "description": "This field contains a ranking of the problem's importance relative to other problems.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["HIGH", "MEDIUM", "LOW"],
      "generationHint": "Clinical importance ranking",
      "example": "HIGH^High Priority^RANKING"
    },
    "PRB.19": {
      "name": "Certainty of Problem",
      "description": "This field indicates the certainty level of the problem diagnosis.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["CERTAIN", "LIKELY", "POSSIBLE", "UNLIKELY"],
      "generationHint": "Diagnostic certainty assessment",
      "example": "CERTAIN^Certain Diagnosis^CERTAINTY"
    },
    "PRB.20": {
      "name": "Probability of Problem (0-1)",
      "description": "This field contains a numeric probability of the problem diagnosis (0.0 to 1.0).",
      "dataType": "NM",
      "usage": "O",
      "maxLength": 5,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Decimal probability between 0.0 and 1.0",
      "example": "0.95"
    },
    "PRB.21": {
      "name": "Individual Awareness of Problem",
      "description": "This field indicates the patient's awareness level of their problem.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["AWARE", "PARTIALLY_AWARE", "UNAWARE", "DENIES"],
      "generationHint": "Patient awareness and acceptance level",
      "example": "AWARE^Fully Aware^AWARENESS"
    },
    "PRB.22": {
      "name": "Prognosis",
      "description": "This field contains the prognosis or expected outcome for the problem.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["EXCELLENT", "GOOD", "FAIR", "POOR", "GUARDED"],
      "generationHint": "Expected clinical outcome",
      "example": "GOOD^Good Prognosis^PROGNOSIS"
    },
    "PRB.23": {
      "name": "Individual Awareness of Prognosis",
      "description": "This field indicates the patient's awareness of their prognosis.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["AWARE", "PARTIALLY_AWARE", "UNAWARE", "FAMILY_AWARE"],
      "generationHint": "Patient awareness of expected outcome",
      "example": "AWARE^Fully Aware of Prognosis^AWARENESS"
    },
    "PRB.24": {
      "name": "Family/Significant Other Awareness of Problem/Prognosis",
      "description": "This field indicates family/significant others' awareness of the problem and prognosis.",
      "dataType": "ST",
      "usage": "O",
      "maxLength": 200,
      "cardinality": {"min": 0, "max": 1},
      "generationHint": "Family awareness and involvement description",
      "example": "Spouse fully informed and supportive of treatment plan"
    },
    "PRB.25": {
      "name": "Security/Sensitivity",
      "description": "This field indicates any security or sensitivity restrictions on the problem information.",
      "dataType": "CE",
      "usage": "O",
      "maxLength": 250,
      "cardinality": {"min": 0, "max": 1},
      "validValues": ["NORMAL", "RESTRICTED", "CONFIDENTIAL", "VIP"],
      "generationHint": "Information sensitivity classification",
      "example": "NORMAL^Normal Sensitivity^SECURITY"
    }
  },
  "vendorVariations": {
    "epic": {
      "commonFields": ["PRB.1", "PRB.2", "PRB.3", "PRB.4", "PRB.14", "PRB.16"],
      "extensions": ["Problem list integration", "Care plan linking", "Quality measure tracking"],
      "notes": "Epic provides comprehensive problem management with integrated care planning"
    },
    "cerner": {
      "commonFields": ["PRB.1", "PRB.3", "PRB.4", "PRB.10", "PRB.14", "PRB.22"],
      "extensions": ["Automated problem resolution", "Outcome prediction", "Care team coordination"],
      "notes": "Cerner emphasizes automation and predictive analytics for problem management"
    },
    "allscripts": {
      "commonFields": ["PRB.3", "PRB.4", "PRB.7", "PRB.14", "PRB.18", "PRB.21"],
      "extensions": ["Patient engagement tools", "Problem priority scoring", "Family communication"],
      "notes": "Allscripts focuses on patient engagement and family involvement in problem management"
    }
  },
  "crossReferences": {
    "fhir": [
      "Condition.identifier",
      "Condition.clinicalStatus",
      "Condition.verificationStatus",
      "Condition.category",
      "Condition.severity",
      "Condition.code",
      "Condition.subject",
      "Condition.onsetDateTime",
      "Condition.abatementDateTime",
      "Condition.recordedDate",
      "Condition.asserter",
      "Condition.stage",
      "Condition.note"
    ],
    "related": [
      "PID (Patient Identification)",
      "PV1 (Patient Visit)",
      "DG1 (Diagnosis)",
      "OBX (Observation/Result)",
      "AL1 (Patient Allergy Information)",
      "GOL (Goal Detail)",
      "PTH (Pathway)",
      "ROL (Role)"
    ]
  },
  "examples": [
    {
      "name": "Active Diabetes Management",
      "segment": "PRB|AD|20230315143000|E11.9^Type 2 Diabetes Mellitus^ICD10|PROB20230315001^HOSPITAL_SYSTEM|EPISODE20230315001^CARE_SYSTEM|1|20230301120000||||||CHRONIC^Chronic Condition^PROBLEM_CLASS|ENDOCRINOLOGY^Endocrinology^SPECIALTY|PERSISTENT^Ongoing Problem^PERSISTENCE|CONFIRMED^Confirmed Diagnosis^CONFIRMATION|ACTIVE^Active Problem^LIFECYCLE|20230315143000|20230201000000|Gradual onset with increased thirst and fatigue|HIGH^High Priority^RANKING|CERTAIN^Certain Diagnosis^CERTAINTY|0.95|AWARE^Fully Aware^AWARENESS|GOOD^Good Prognosis^PROGNOSIS|AWARE^Fully Aware of Prognosis^AWARENESS|Spouse supportive of dietary changes|NORMAL^Normal Sensitivity^SECURITY",
      "description": "Active diabetes problem with comprehensive management details"
    },
    {
      "name": "Resolved Acute Problem",
      "segment": "PRB|UP|20230325140000|J44.0^COPD with Acute Exacerbation^ICD10|PROB20230310001^HOSPITAL_SYSTEM||2|20230310080000|20230320000000|20230318120000|ACUTE^Acute Condition^PROBLEM_CLASS|PULMONOLOGY^Pulmonology^SPECIALTY|EPISODIC^Episodic Problem^PERSISTENCE|CONFIRMED^Confirmed Diagnosis^CONFIRMATION|RESOLVED^Resolved Problem^LIFECYCLE|20230325140000|20230308000000|Sudden worsening of breathing|MEDIUM^Medium Priority^RANKING|CERTAIN^Certain Diagnosis^CERTAINTY|1.0|AWARE^Fully Aware^AWARENESS|EXCELLENT^Excellent Prognosis^PROGNOSIS|AWARE^Fully Aware of Prognosis^AWARENESS|Family understands triggers and prevention|NORMAL^Normal Sensitivity^SECURITY",
      "description": "COPD exacerbation that has been successfully resolved"
    },
    {
      "name": "Differential Diagnosis",
      "segment": "PRB|AD|20230315100000|R06.02^Shortness of Breath^ICD10|PROB20230315002^HOSPITAL_SYSTEM||3|20230315100000|||||ACUTE^Acute Condition^PROBLEM_CLASS|CARDIOLOGY^Cardiology^SPECIALTY|EPISODIC^Episodic Problem^PERSISTENCE|DIFFERENTIAL^Differential Diagnosis^CONFIRMATION|ACTIVE^Active Problem^LIFECYCLE|20230315100000|20230314180000|Sudden onset during exercise|HIGH^High Priority^RANKING|POSSIBLE^Possible Diagnosis^CERTAINTY|0.60|AWARE^Fully Aware^AWARENESS|FAIR^Fair Prognosis^PROGNOSIS|PARTIALLY_AWARE^Partially Aware of Prognosis^AWARENESS|Family anxious about cardiac workup|NORMAL^Normal Sensitivity^SECURITY",
      "description": "Active differential diagnosis workup for cardiac symptoms"
    }
  ],
  "notes": [
    "PRB segments provide comprehensive problem documentation beyond basic diagnosis coding",
    "The segment supports both acute and chronic problem management workflows",
    "Problem lifecycle tracking enables comprehensive care coordination",
    "Patient and family awareness fields support patient-centered care approaches",
    "Multiple PRB segments may be used for complex patients with multiple problems",
    "The segment integrates with care planning and quality improvement initiatives",
    "Security/sensitivity fields support privacy protection for sensitive conditions"
  ],
  "generationRules": {
    "fieldPopulation": {
      "required": ["PRB.1", "PRB.2", "PRB.3", "PRB.4"],
      "recommended": ["PRB.7", "PRB.10", "PRB.14", "PRB.16", "PRB.18"],
      "situational": ["PRB.8", "PRB.9", "PRB.22", "PRB.23", "PRB.25"]
    },
    "dataConsistency": {
      "dateValidation": "PRB.9 (resolution) must be >= PRB.7 (established) when present",
      "statusCoherence": "PRB.14 (lifecycle status) must align with PRB.9 (resolution date)",
      "probabilityRange": "PRB.20 must be between 0.0 and 1.0",
      "confirmationLogic": "PRB.13 and PRB.19 should be consistent with certainty levels"
    },
    "businessRules": {
      "problemPriority": "Higher priority problems typically have lower PRB.6 values",
      "chronicProblems": "Chronic problems rarely have anticipated resolution dates",
      "resolvedProblems": "Resolved problems must have actual resolution dates",
      "awarenessAlignment": "Patient awareness should align with communication documentation"
    },
    "messageFlow": {
      "triggers": ["Problem identification", "Status updates", "Resolution documentation"],
      "responses": ["Care plan updates", "Provider notifications", "Quality reporting"],
      "workflow": "Usually accompanies clinical documentation and care planning messages"
    }
  }
}
